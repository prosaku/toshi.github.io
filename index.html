<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>計算機</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #e0f7fa;
      padding: 20px;
      margin: 0;
      color: #01579b;
    }

    h2 {
      font-size: 1.8rem;
      color: #0277bd;
      margin-bottom: 20px;
      text-align: center;
    }

    .input-group, .type-group {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 15px;
      font-size: 1.1rem;
    }

    input[type="number"] {
      font-size: 1rem;
      padding: 8px;
      width: 80px;
      text-align: center;
      border: 1px solid #4dd0e1;
      border-radius: 5px;
      background-color: #ffffff;
      color: #01579b;
    }

    input[type="radio"] {
      margin-right: 5px;
    }

    label {
      display: flex;
      align-items: center;
    }

    button {
      font-size: 1rem;
      padding: 10px 20px;
      background-color: #4dd0e1;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      display: block;
      margin: 0 auto;
    }

    button:hover {
      background-color: #00acc1;
    }

    #result {
      font-size: 1.4rem;
      margin-top: 25px;
      text-align: center;
      color: #006064;
    }

    .highlight-crystal {
      font-weight: bold;
      font-size: 1.6rem;
      color: #0288d1;
    }

    .highlight-gold {
      font-weight: bold;
      font-size: 1.6rem;
      color: goldenrod;
    }
  </style>
</head>
<body>
  <h2 id="title">クリスタル計算機</h2>

  <div class="type-group">
    <label><input type="radio" name="type" value="crystal" checked onchange="updateTitle()">クリスタル強化</label>
    <label><input type="radio" name="type" value="cube" onchange="updateTitle()">キューブ強化</label>
  </div>

  <div class="input-group">
    <label id="label-start"><span>属性値</span> <input type="number" id="start" min="0"></label>
    <label id="label-end"><span>から</span> <input type="number" id="end" min="1"></label>
    <span>まで！</span>
  </div>

  <button onclick="showRequired()">チェック！</button>

  <p id="result">必要数は…？</p>

  <script>
    function an(n) {
      if (n === 0) return 0;
      if (n % 2 === 0) {
        return (n / 2) * (n / 2 + 1);
      } else {
        return Math.pow((n + 1) / 2, 2);
      }
    }

    function goldStep(n, type) {
      return type === "crystal" ? 20 + n * 20 : 10 + n * 10;
    }

    function goldRequired(start, end, type) {
      let total = 0;
      for (let i = start; i < end; i++) {
        total += goldStep(i, type);
      }
      return total;
    }

    function getSelectedType() {
      const radios = document.getElementsByName("type");
      for (let radio of radios) {
        if (radio.checked) return radio.value;
      }
      return "crystal";
    }

    function updateTitle() {
      const type = getSelectedType();

      // タイトル切り替え
      document.getElementById("title").textContent =
        type === "cube" ? "キューブ計算機" : "クリスタル計算機";

      // ラベル切り替え
      const labelStart = document.querySelector("#label-start span");
      labelStart.textContent = type === "cube" ? "修正値" : "属性値";

      // 入力リセット
      document.getElementById("start").value = "";
      document.getElementById("end").value = "";
      document.getElementById("result").textContent = "必要数は…？";
    }

    function showRequired() {
      const start = Number(document.getElementById("start").value);
      const end = Number(document.getElementById("end").value);
      const type = getSelectedType();

      if (isNaN(start) || isNaN(end)) {
        document.getElementById("result").textContent = "属性値を正しく入力してください！";
        return;
      }

      if (start >= end) {
        document.getElementById("result").textContent = "開始属性値は終了属性値より小さくしてください！";
        return;
      }

      const crystalRequired = an(end) - an(start);
      const goldRequiredTotal = goldRequired(start, end, type);

      document.getElementById("result").innerHTML =
        `必要数は <span class="highlight-crystal">${crystalRequired}</span> 個！<br>` +
        `ゴールドは <span class="highlight-gold">${goldRequiredTotal}</span> G！`;
    }
  </script>
</body>
</html>
